--
-- PostgreSQL database dump
--

-- Dumped from database version 9.3.10
-- Dumped by pg_dump version 9.3.10
-- Started on 2016-03-12 00:59:58 PYST

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 185 (class 3079 OID 11789)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2073 (class 0 OID 0)
-- Dependencies: 185
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

--
-- TOC entry 171 (class 1259 OID 16718)
-- Name: cliente_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE cliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.cliente_seq OWNER TO postgres;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 170 (class 1259 OID 16704)
-- Name: cliente; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE cliente (
    id bigint DEFAULT nextval('cliente_seq'::regclass) NOT NULL,
    nombre character varying(20),
    saldo character varying(20)
);


ALTER TABLE public.cliente OWNER TO postgres;

--
-- TOC entry 178 (class 1259 OID 16779)
-- Name: compra_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE compra_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.compra_seq OWNER TO postgres;

--
-- TOC entry 176 (class 1259 OID 16773)
-- Name: compra; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE compra (
    id bigint DEFAULT nextval('compra_seq'::regclass) NOT NULL,
    proveedor_id bigint
);


ALTER TABLE public.compra OWNER TO postgres;

--
-- TOC entry 179 (class 1259 OID 16782)
-- Name: detalle_compra_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE detalle_compra_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.detalle_compra_seq OWNER TO postgres;

--
-- TOC entry 177 (class 1259 OID 16776)
-- Name: detalle_compra; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE detalle_compra (
    id bigint DEFAULT nextval('detalle_compra_seq'::regclass) NOT NULL,
    cantidad character varying(20),
    compra_id bigint,
    producto_id bigint
);


ALTER TABLE public.detalle_compra OWNER TO postgres;

--
-- TOC entry 181 (class 1259 OID 16816)
-- Name: detalle_venta_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE detalle_venta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.detalle_venta_seq OWNER TO postgres;

--
-- TOC entry 183 (class 1259 OID 16830)
-- Name: detalle_venta; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE detalle_venta (
    id bigint DEFAULT nextval('detalle_venta_seq'::regclass) NOT NULL,
    venta_id bigint,
    producto_id bigint,
    cantidad bigint,
    CONSTRAINT cantidad_greater CHECK ((cantidad > 0))
);


ALTER TABLE public.detalle_venta OWNER TO postgres;

--
-- TOC entry 174 (class 1259 OID 16741)
-- Name: producto_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE producto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.producto_seq OWNER TO postgres;

--
-- TOC entry 175 (class 1259 OID 16761)
-- Name: producto; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE producto (
    id bigint DEFAULT nextval('producto_seq'::regclass) NOT NULL,
    nombre character varying(20),
    precio character varying(20),
    cantidad character varying(20),
    proveedor_id bigint
);


ALTER TABLE public.producto OWNER TO postgres;

--
-- TOC entry 184 (class 1259 OID 16960)
-- Name: producto_duplicado; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE producto_duplicado (
    id bigint NOT NULL,
    cod_producto bigint,
    cantidad bigint DEFAULT 1
);


ALTER TABLE public.producto_duplicado OWNER TO postgres;

--
-- TOC entry 172 (class 1259 OID 16724)
-- Name: proveedor_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE proveedor_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.proveedor_seq OWNER TO postgres;

--
-- TOC entry 173 (class 1259 OID 16726)
-- Name: proveedor; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE proveedor (
    id bigint DEFAULT nextval('proveedor_seq'::regclass) NOT NULL,
    nombre character varying(20)
);


ALTER TABLE public.proveedor OWNER TO postgres;

--
-- TOC entry 180 (class 1259 OID 16814)
-- Name: venta_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE venta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999
    CACHE 1;


ALTER TABLE public.venta_seq OWNER TO postgres;

--
-- TOC entry 182 (class 1259 OID 16818)
-- Name: venta; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE venta (
    id bigint DEFAULT nextval('venta_seq'::regclass) NOT NULL,
    cliente_id bigint
);


ALTER TABLE public.venta OWNER TO postgres;

--
-- TOC entry 2051 (class 0 OID 16704)
-- Dependencies: 170
-- Data for Name: cliente; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY cliente (id, nombre, saldo) FROM stdin;
14	nabil	0
\.


--
-- TOC entry 2074 (class 0 OID 0)
-- Dependencies: 171
-- Name: cliente_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('cliente_seq', 15, true);


--
-- TOC entry 2057 (class 0 OID 16773)
-- Dependencies: 176
-- Data for Name: compra; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY compra (id, proveedor_id) FROM stdin;
1	6
2	6
3	6
\.


--
-- TOC entry 2075 (class 0 OID 0)
-- Dependencies: 178
-- Name: compra_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('compra_seq', 3, true);


--
-- TOC entry 2058 (class 0 OID 16776)
-- Dependencies: 177
-- Data for Name: detalle_compra; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY detalle_compra (id, cantidad, compra_id, producto_id) FROM stdin;
\.


--
-- TOC entry 2076 (class 0 OID 0)
-- Dependencies: 179
-- Name: detalle_compra_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('detalle_compra_seq', 1, false);


--
-- TOC entry 2064 (class 0 OID 16830)
-- Dependencies: 183
-- Data for Name: detalle_venta; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY detalle_venta (id, venta_id, producto_id, cantidad) FROM stdin;
\.


--
-- TOC entry 2077 (class 0 OID 0)
-- Dependencies: 181
-- Name: detalle_venta_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('detalle_venta_seq', 15, true);


--
-- TOC entry 2056 (class 0 OID 16761)
-- Dependencies: 175
-- Data for Name: producto; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY producto (id, nombre, precio, cantidad, proveedor_id) FROM stdin;
19	gaseosa	7000	5	6
\.


--
-- TOC entry 2065 (class 0 OID 16960)
-- Dependencies: 184
-- Data for Name: producto_duplicado; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY producto_duplicado (id, cod_producto, cantidad) FROM stdin;
\.


--
-- TOC entry 2078 (class 0 OID 0)
-- Dependencies: 174
-- Name: producto_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('producto_seq', 20, true);


--
-- TOC entry 2054 (class 0 OID 16726)
-- Dependencies: 173
-- Data for Name: proveedor; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY proveedor (id, nombre) FROM stdin;
6	nico
7	hans
8	hans
\.


--
-- TOC entry 2079 (class 0 OID 0)
-- Dependencies: 172
-- Name: proveedor_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('proveedor_seq', 8, true);


--
-- TOC entry 2063 (class 0 OID 16818)
-- Dependencies: 182
-- Data for Name: venta; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY venta (id, cliente_id) FROM stdin;
1	14
2	14
3	14
4	14
5	14
6	14
7	14
8	14
9	14
10	14
\.


--
-- TOC entry 2080 (class 0 OID 0)
-- Dependencies: 180
-- Name: venta_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('venta_seq', 12, true);


--
-- TOC entry 1911 (class 2606 OID 16715)
-- Name: cliente_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY cliente
    ADD CONSTRAINT cliente_pkey PRIMARY KEY (id);


--
-- TOC entry 1920 (class 2606 OID 16795)
-- Name: compra_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY compra
    ADD CONSTRAINT compra_pkey PRIMARY KEY (id);


--
-- TOC entry 1923 (class 2606 OID 16789)
-- Name: detalle_compra_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY detalle_compra
    ADD CONSTRAINT detalle_compra_pkey PRIMARY KEY (id);


--
-- TOC entry 1930 (class 2606 OID 16838)
-- Name: detalle_venta_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY detalle_venta
    ADD CONSTRAINT detalle_venta_pkey PRIMARY KEY (id);


--
-- TOC entry 1916 (class 2606 OID 16959)
-- Name: nombre_unico; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY producto
    ADD CONSTRAINT nombre_unico UNIQUE (nombre);


--
-- TOC entry 1935 (class 2606 OID 16964)
-- Name: producto_duplicado_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY producto_duplicado
    ADD CONSTRAINT producto_duplicado_pkey PRIMARY KEY (id);


--
-- TOC entry 1918 (class 2606 OID 16765)
-- Name: producto_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY producto
    ADD CONSTRAINT producto_pkey PRIMARY KEY (id);


--
-- TOC entry 1913 (class 2606 OID 16737)
-- Name: proveedor_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY proveedor
    ADD CONSTRAINT proveedor_pkey PRIMARY KEY (id);


--
-- TOC entry 1928 (class 2606 OID 16822)
-- Name: venta_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY venta
    ADD CONSTRAINT venta_pkey PRIMARY KEY (id);


--
-- TOC entry 1926 (class 1259 OID 16828)
-- Name: fki_cliente_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_cliente_fk ON venta USING btree (cliente_id);


--
-- TOC entry 1924 (class 1259 OID 16807)
-- Name: fki_compra_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_compra_fk ON detalle_compra USING btree (compra_id);


--
-- TOC entry 1925 (class 1259 OID 16813)
-- Name: fki_producto_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_producto_fk ON detalle_compra USING btree (producto_id);


--
-- TOC entry 1931 (class 1259 OID 16855)
-- Name: fki_producto_fk_detalle; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_producto_fk_detalle ON detalle_venta USING btree (producto_id);


--
-- TOC entry 1933 (class 1259 OID 16970)
-- Name: fki_producto_fkey; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_producto_fkey ON producto_duplicado USING btree (cod_producto);


--
-- TOC entry 1921 (class 1259 OID 16801)
-- Name: fki_proveedor; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_proveedor ON compra USING btree (proveedor_id);


--
-- TOC entry 1914 (class 1259 OID 16771)
-- Name: fki_proveedor_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_proveedor_fk ON producto USING btree (proveedor_id);


--
-- TOC entry 1932 (class 1259 OID 16844)
-- Name: fki_venta_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX fki_venta_fk ON detalle_venta USING btree (venta_id);


--
-- TOC entry 1940 (class 2606 OID 16823)
-- Name: cliente_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY venta
    ADD CONSTRAINT cliente_fk FOREIGN KEY (cliente_id) REFERENCES cliente(id);


--
-- TOC entry 1938 (class 2606 OID 16802)
-- Name: compra_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY detalle_compra
    ADD CONSTRAINT compra_fk FOREIGN KEY (compra_id) REFERENCES compra(id);


--
-- TOC entry 1937 (class 2606 OID 16796)
-- Name: fk_proveedor; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY compra
    ADD CONSTRAINT fk_proveedor FOREIGN KEY (proveedor_id) REFERENCES proveedor(id);


--
-- TOC entry 1939 (class 2606 OID 16808)
-- Name: producto_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY detalle_compra
    ADD CONSTRAINT producto_fk FOREIGN KEY (producto_id) REFERENCES producto(id);


--
-- TOC entry 1942 (class 2606 OID 16850)
-- Name: producto_fk_detalle; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY detalle_venta
    ADD CONSTRAINT producto_fk_detalle FOREIGN KEY (producto_id) REFERENCES producto(id);


--
-- TOC entry 1943 (class 2606 OID 16965)
-- Name: producto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY producto_duplicado
    ADD CONSTRAINT producto_fkey FOREIGN KEY (cod_producto) REFERENCES producto(id);


--
-- TOC entry 1936 (class 2606 OID 16766)
-- Name: proveedor_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY producto
    ADD CONSTRAINT proveedor_fk FOREIGN KEY (proveedor_id) REFERENCES proveedor(id);


--
-- TOC entry 1941 (class 2606 OID 16839)
-- Name: venta_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY detalle_venta
    ADD CONSTRAINT venta_fk FOREIGN KEY (venta_id) REFERENCES venta(id);


--
-- TOC entry 2072 (class 0 OID 0)
-- Dependencies: 5
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2016-03-12 00:59:58 PYST

--
-- PostgreSQL database dump complete
--
